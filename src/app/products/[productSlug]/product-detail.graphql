query ProductDetail ($slug: String!) {
  productCollection (where: { slug: $slug }, limit: 1) {
    items {
      ...ProductDetailData
    }
  }
}

fragment ProductDetailData on Product {
  name
  slug
  defaultMedia {
    ...ProductMediaData
  }
  variantsCollection {
    items {
      sku
      media {
        ...ProductMediaData
      }
    }
  }
}

fragment ProductMediaData on ProductMedia {
  internalName
  mediaCollection {
    items {
      ...AssetData
    }
  }
}